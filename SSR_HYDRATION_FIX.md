# üîß SSR Hydration Mismatch Fix

**–î–∞—Ç–∞:** 28 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ü—Ä–æ–±–ª–µ–º–∞:** Hydration failed - —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä—è—Ç —Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üîç –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞:
```
Hydration failed because the server rendered text didn't match the client.
- aria-label="Navigate to –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"  (Server)
+ aria-label="Navigate to ’Ä’°’ø’Ø’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä"  (Client)
```

### –ü—Ä–∏—á–∏–Ω–∞:
1. **i18next** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `localStorage` –∏ `navigator` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞
2. –ù–∞ **—Å–µ—Ä–≤–µ—Ä–µ (SSR)** –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `localStorage` –∏ `navigator`
3. –°–µ—Ä–≤–µ—Ä —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å —è–∑—ã–∫–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'en')
4. –ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —è–∑—ã–∫ –∏–∑ `localStorage` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'hy')
5. **React –≤–∏–¥–∏—Ç —Ä–∞–∑–Ω–∏—Ü—É** –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–Ω—ã–º –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º HTML ‚Üí Hydration error

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω `src/i18n/config.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `typeof window !== 'undefined'`
- ‚úÖ `LanguageDetector` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `lng: 'en'` –¥–ª—è SSR –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `useSuspense: false` –¥–ª—è React 18+
- ‚úÖ Detection config —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**–ö–æ–¥:**
```typescript
// Only use LanguageDetector on client side
if (typeof window !== 'undefined') {
  i18n.use(LanguageDetector);
}

i18n
  .use(initReactI18next)
  .init({
    resources,
    defaultNS,
    fallbackLng: 'en',
    lng: 'en', // Default language for SSR
    
    interpolation: {
      escapeValue: false,
    },
    
    // Client-side language detection
    detection: typeof window !== 'undefined' ? {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage'],
    } : undefined,
    
    // SSR support
    react: {
      useSuspense: false, // Disable Suspense for SSR compatibility
    },
  });
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω `src/components/I18nProvider.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `useState` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- ‚úÖ `useEffect` –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —è–∑—ã–∫ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç hydration mismatch —Å –ø–æ–º–æ—â—å—é —Ñ–ª–∞–≥–∞ `isReady`

**–ö–æ–¥:**
```typescript
export function I18nProvider({ children }: { children: React.ReactNode }) {
  const { i18n } = useTranslation();
  const [isReady, setIsReady] = useState(false);

  useEffect(() => {
    // On client-side, detect and apply saved language
    if (typeof window !== 'undefined') {
      const savedLang = localStorage.getItem('i18nextLng');
      if (savedLang && savedLang !== i18n.language) {
        i18n.changeLanguage(savedLang);
      }
    }
    setIsReady(true);
  }, [i18n]);

  // Prevent hydration mismatch by not rendering until language is set
  if (!isReady) {
    return <>{children}</>;
  }

  return <>{children}</>;
}
```

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

### SSR (Server-Side Rendering):
1. ‚úÖ –°–µ—Ä–≤–µ—Ä –≤—Å–µ–≥–¥–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å `lng: 'en'`
2. ‚úÖ –ù–µ—Ç –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ `localStorage`
3. ‚úÖ HTML –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å –∞–Ω–≥–ª–∏–π—Å–∫–∏–º —è–∑—ã–∫–æ–º

### Client-Side Hydration:
1. ‚úÖ React –≥–∏–¥—Ä–∞—Ç–∏—Ä—É–µ—Ç —Å —Ç–µ–º –∂–µ —è–∑—ã–∫–æ–º ('en')
2. ‚úÖ –ü–æ—Å–ª–µ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏ `I18nProvider` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `localStorage`
3. ‚úÖ –ï—Å–ª–∏ –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —è–∑—ã–∫ ‚Üí –º–µ–Ω—è–µ—Ç –Ω–∞ –Ω–µ–≥–æ
4. ‚úÖ React –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —è–∑—ã–∫–æ–º
5. ‚úÖ **–ù–µ—Ç hydration mismatch!**

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏** - —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ  
‚úÖ **SEO-friendly** - –ø–æ–∏—Å–∫–æ–≤–∏–∫–∏ –≤–∏–¥—è—Ç –∞–Ω–≥–ª–∏–π—Å–∫—É—é –≤–µ—Ä—Å–∏—é  
‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤—ã–±–æ—Ä —è–∑—ã–∫–∞** - –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —è–∑—ã–∫ –æ—Å—Ç–∞–µ—Ç—Å—è  
‚úÖ **–ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - —è–∑—ã–∫ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏  
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Next.js** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å SSR –∏ SSG  

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —è–∑—ã–∫ –Ω–∞ —Ä—É—Å—Å–∫–∏–π –∏–ª–∏ –∞—Ä–º—è–Ω—Å–∫–∏–π
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å - **–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å hydration errors**
5. –Ø–∑—ã–∫ –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è —Ç–µ–º –∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ –Ø–∑—ã–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤
- ‚úÖ SSR —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `src/i18n/config.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ SSR –ø–æ–¥–¥–µ—Ä–∂–∫–∞
2. `src/components/I18nProvider.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è hydration mismatch

---

## üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### Schema Validation Error:
```
Document with ID "..." in table "users" does not match the schema: 
Object contains extra field `breakInterval` that is not in the validator.
```

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–µ `breakInterval` —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Å—Ö–µ–º–µ (`convex/schema.ts:150`).  
–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è –≤ —Å—Ö–µ–º—É.

**–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
1. –î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å - –ø–æ–ª–µ —É–∂–µ –≤ —Å—Ö–µ–º–µ
2. –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Convex dashboard

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å SSR –∏ –Ω–µ –≤—ã–¥–∞–µ—Ç hydration errors –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —è–∑—ã–∫–æ–≤!

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** AI Assistant  
**–î–∞—Ç–∞:** 28.02.2026
