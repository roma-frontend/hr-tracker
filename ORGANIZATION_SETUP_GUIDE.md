# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

## 1. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ "adb-arrm"

### –®–∞–≥ 1: –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω
- Email: `romangulanyan@gmail.com`
- –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —É –≤–∞—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Convex
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `createOrganization`:
```typescript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ API
await convex.mutation(api.organizations.createOrganization, {
  superadminUserId: "<–≤–∞—à_user_id>",
  name: "ADB-ARRM",
  slug: "adb-arrm",
  plan: "professional", // –∏–ª–∏ "starter" / "enterprise"
  timezone: "Asia/Yerevan",
  country: "Armenia",
  industry: "Technology" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
});
```

### –®–∞–≥ 3: –ù–∞–∑–Ω–∞—á—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
```typescript
await convex.mutation(api.organizations.assignOrgAdmin, {
  superadminUserId: "<–≤–∞—à_superadmin_id>",
  userId: "<id_—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞>",
  organizationId: "<id_–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏_adb-arrm>"
});
```

---

## 2. –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π

### üÖ∞Ô∏è –í–∞—Ä–∏–∞–Ω—Ç A: –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (Self-Service)
**–î–ª—è SaaS-–º–æ–¥–µ–ª–∏, –≥–¥–µ –ª—é–±–æ–π –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é**

#### –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:
1. **–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "Create Organization"** —Ä—è–¥–æ–º —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π
2. **–°–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é –º—É—Ç–∞—Ü–∏—é** –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–æ–º** —ç—Ç–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

#### Workflow:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/register/create-org`
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - Slug (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
   - –°–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ (–∏–º—è, email, –ø–∞—Ä–æ–ª—å)
   - –í—ã–±–∏—Ä–∞–µ—Ç –ø–ª–∞–Ω (Starter –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–Ω—ã–µ)
3. –°–∏—Å—Ç–µ–º–∞:
   - –°–æ–∑–¥–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
   - –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ –∞–¥–º–∏–Ω–∞
   - –¢—Ä–µ–±—É–µ—Ç –æ–ø–ª–∞—Ç—É –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ (Stripe)
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç welcome email

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚úÖ –ù–µ—Ç —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞
‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
‚ùå –ù—É–∂–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—è (–≤–æ–∑–º–æ–∂–µ–Ω —Å–ø–∞–º)
‚ùå –ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–ø–ª–∞—Ç–æ–π

---

### üÖ±Ô∏è –í–∞—Ä–∏–∞–Ω—Ç B: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∑–∞–ø—Ä–æ—Å (Request-Based)
**–î–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–æ–¥–µ–ª–∏, –≥–¥–µ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

#### Workflow:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/register/request-org`
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
   - Slug
   - –û—Ç—Ä–∞—Å–ª—å, —Ä–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã
   - –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–º—è, email, —Ç–µ–ª–µ—Ñ–æ–Ω)
   - –ë–∏–∑–Ω–µ—Å-–æ–ø–∏—Å–∞–Ω–∏–µ
3. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç "Organization Request"
4. –°—É–ø–µ—Ä–∞–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
5. –°—É–ø–µ—Ä–∞–¥–º–∏–Ω:
   - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
   - –£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç ‚Üí —Å–æ–∑–¥–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é + –¥–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–æ–º
   - –û—Ç–∫–ª–æ–Ω—è–µ—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
‚úÖ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
‚úÖ –ù–µ—Ç —Å–ø–∞–º–∞

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
‚ùå –ú–µ–¥–ª–µ–Ω–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
‚ùå –ù–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è

---

## 3. –ú–æ–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è (–æ—Ñ–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞):
**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç B (Request-Based)** + –¥–æ–±–∞–≤—å—Ç–µ –ø–∞–Ω–µ–ª—å —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞

### –ü–æ—á–µ–º—É:
- –£ –≤–∞—Å –Ω–µ–±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
- –í—ã —Ö–æ—Ç–∏—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, –∫—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –º–∞—Å—Å–æ–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

#### 1. –¢–∞–±–ª–∏—Ü–∞ `organizationRequests` (—Å—Ö–µ–º–∞)
```typescript
organizationRequests: defineTable({
  requestedName: v.string(),
  requestedSlug: v.string(),
  requesterName: v.string(),
  requesterEmail: v.string(),
  requesterPhone: v.optional(v.string()),
  requestedPlan: v.union(v.literal("starter"), v.literal("professional"), v.literal("enterprise")),
  industry: v.optional(v.string()),
  teamSize: v.optional(v.string()),
  description: v.optional(v.string()),
  status: v.union(v.literal("pending"), v.literal("approved"), v.literal("rejected")),
  reviewedBy: v.optional(v.id("users")),
  reviewedAt: v.optional(v.number()),
  rejectionReason: v.optional(v.string()),
  createdAt: v.number(),
})
  .index("by_status", ["status"])
  .index("by_email", ["requesterEmail"])
```

#### 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/register/request-org`
- –§–æ—Ä–º–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è slug –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞

#### 3. –ü–∞–Ω–µ–ª—å —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞ `/superadmin/org-requests`
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –§–∏–ª—å—Ç—Ä: Pending / Approved / Rejected
- –ö–Ω–æ–ø–∫–∏: Approve / Reject
- –ü—Ä–∏ Approve:
  - –°–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
  - –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–∞–∫ –∞–¥–º–∏–Ω
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email —Å –ª–æ–≥–∏–Ω–æ–º

---

## 4. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è adb-arrm

### –°–æ–∑–¥–∞–π—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Desktop/office/scripts/setup-adb-arrm.ts`:

```typescript
import { ConvexHttpClient } from "convex/browser";
import { api } from "../convex/_generated/api";

const client = new ConvexHttpClient(process.env.NEXT_PUBLIC_CONVEX_URL!);

async function setup() {
  // 1. –ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à superadmin userId (–≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ localStorage)
  const superadminUserId = "YOUR_USER_ID"; // –∑–∞–º–µ–Ω–∏—Ç–µ

  // 2. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
  const { orgId } = await client.mutation(api.organizations.createOrganization, {
    superadminUserId,
    name: "ADB-ARRM",
    slug: "adb-arrm",
    plan: "professional",
    timezone: "Asia/Yerevan",
    country: "Armenia",
    industry: "Technology",
  });

  console.log("‚úÖ Organization created:", orgId);

  // 3. –ù–∞–∑–Ω–∞—á—å—Ç–µ –∞–¥–º–∏–Ω–∞ (–µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
  // const userId = "USER_ID_OF_ADMIN";
  // await client.mutation(api.organizations.assignOrgAdmin, {
  //   superadminUserId,
  //   userId,
  //   organizationId: orgId,
  // });

  console.log("‚úÖ Done!");
}

setup();
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
npx tsx scripts/setup-adb-arrm.ts
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–†–µ—à–∏—Ç–µ**: –í–∞—Ä–∏–∞–Ω—Ç A –∏–ª–∏ B?
2. **–î–ª—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞–π—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é adb-arrm –≤—Ä—É—á–Ω—É—é (—Å–∫—Ä–∏–ø—Ç –≤—ã—à–µ)
3. **–î–ª—è –±—É–¥—É—â–µ–≥–æ**: –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ß—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ? –ü–æ–º–æ—á—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å?
